<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYC and KYB Processing API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #0056b3;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        p {
            margin-bottom: 10px;
        }
        ul, ol {
            margin: 10px 0 20px 20px;
        }
        pre {
            background-color: #eee;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            background-color: #f9f2f4;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: Consolas, "courier new", monospace;
        }
        a {
            color: #0056b3;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>KYC and KYB Processing API</h1>
        <p>This repository contains a FastAPI-based application for performing KYC (Know Your Customer) and KYB (Know Your Business) processes using provided URLs for ID cards, selfies, and various business documents. The API leverages OCR to evaluate the quality of ID card images and performs face comparison to verify identity. For KYB processing, it analyzes documents to determine their types and validate their contents.</p>
        
        <h2>Features</h2>
        <ul>
            <li><strong>KYC Processing</strong>:
                <ul>
                    <li>Evaluates the quality of ID card images using OCR.</li>
                    <li>Compares faces in ID card images with selfie images to verify identity.</li>
                    <li>Provides detailed results including face detection, comparison scores, and status.</li>
                </ul>
            </li>
            <li><strong>KYB Processing</strong>:
                <ul>
                    <li>Analyzes business documents (NPWP, NIB, Company Deed, Decree) to determine document types and validate contents.</li>
                    <li>Uses Google's Vertex AI for document analysis.</li>
                    <li>Provides detailed results including document types, confidence scores, and similarity scores for names and addresses.</li>
                </ul>
            </li>
        </ul>
        
        <h2>Endpoints</h2>
        <h3>POST /kyc/</h3>
        <h4>Request</h4>
        <p>Form data parameters:</p>
        <ul>
            <li><code>url_ktp</code>: URL of the ID card image.</li>
            <li><code>url_selfie</code>: URL of the selfie image.</li>
            <li><code>url_npwp</code>: URL of the NPWP document.</li>
            <li><code>url_nib</code>: URL of the NIB document.</li>
            <li><code>url_akta</code>: URL of the Company Deed document.</li>
            <li><code>url_sk</code>: URL of the Kementerian Hukum dan HAM decree document.</li>
        </ul>
        
        <h4>Response</h4>
        <p>The response is a JSON object containing the results of the KYC and KYB processes.</p>
        <pre><code>{
  "kyc": {
    "details": [...],
    "avg_score": 85.0,
    "face_detected_in_id_card": 1,
    "face_detected_in_person_pict": 1,
    "status": "Accept",
    "summary": "Accepted: User is holding the ID card, and the face matches.",
    "id_card_detected": true,
    "id_card_coordinates": [...]
  },
  "kyb": {
    "result": {
      "image_1": {...},
      "image_2": {...},
      "image_3": {...},
      "image_4": {...},
      "match_score_name": 90.0,
      "match_score_address": 85.0,
      "explanation": "All documents are valid"
    },
    "usage": {
      "prompt_token_count": 100,
      "candidates_token_count": 200,
      "total_token_count": 300
    }
  }
}
</code></pre>
        
        <h2>Installation</h2>
        <ol>
            <li>Clone the repository:
                <pre><code>git clone &lt;repository_url&gt;
cd &lt;repository_directory&gt;
</code></pre>
            </li>
            <li>Install dependencies:
                <pre><code>pip install -r requirements.txt
</code></pre>
            </li>
            <li>Run the FastAPI application:
                <pre><code>uvicorn app:app --reload
</code></pre>
            </li>
        </ol>
        
        <h2>Structure</h2>
        <ul>
            <li><code>app.py</code>: Main FastAPI application.</li>
            <li><code>kyc.py</code>: Functions related to KYC processing.</li>
            <li><code>kyb_pipeline.py</code>: Functions related to KYB processing.</li>
            <li><code>image_quality.py</code>: Functions related to evaluating the quality of ID card images.</li>
            <li><code>models.py</code>: Pydantic models for request and response data validation.</li>
            <li><code>requirements.txt</code>: List of dependencies.</li>
        </ul>
        
        <h2>Usage</h2>
        <ol>
            <li>Start the FastAPI server.</li>
            <li>Send a POST request to <code>/kyc/</code> with the necessary form data.</li>
            <li>Receive the KYC and KYB processing results in the response.</li>
        </ol>
        
        <h2>Flowchart</h2>
        <p>For a detailed flowchart of the process, visit the following link:</p>
        <p><a href="https://drive.google.com/file/d/1xRekj-RxI770zezcPmMBZzK0vOjYHHDR/view?usp=sharing">Flowchart</a></p>
        
        <h2>License</h2>
        <p>This project is licensed under the MIT License. See the <a href="LICENSE">LICENSE</a> file for details.</p>
    </div>
</body>
</html>
